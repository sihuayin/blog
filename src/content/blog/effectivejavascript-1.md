---
title: "ç¼–å†™é«˜è´¨é‡JavaScriptä»£ç çš„68ä¸ªæœ‰æ•ˆæ–¹æ³• - 1"
description: "ç¼–å†™é«˜è´¨é‡JavaScriptä»£ç çš„68ä¸ªæœ‰æ•ˆæ–¹æ³•"
pubDatetime: 2015-05-01
tags: ["javascript"]
---


## ç¬¬ä¸€ç«  è®©è‡ªå·±ä¹ æƒ¯JavaScript


#### ç¬¬ä¸€æ¡ äº†è§£ä½ ä½¿ç”¨çš„JavaScriptç‰ˆæœ¬ (-)

  JavaScriptä»å‘å¸ƒä»¥æ¥ï¼Œç»å†äº†å¤šä¸ªç‰ˆæœ¬ã€‚ES3, ES5, ES2015, ES2016...ã€‚ ä¸åŒæµè§ˆå™¨ä½¿ç”¨çš„jså¼•æ“å¯¹è¯­è¨€æ ‡å‡†å’Œç‰¹æ€§å®ç°çš„ä¸ä¸€è‡´ä¹Ÿå¯¼è‡´äº†ï¼Œåœ¨ç¼–å†™jsçš„ä»£ç çš„æ—¶å€™è¦è€ƒè™‘è¿è¡Œç¯å¢ƒçš„é—®é¢˜ã€‚
  
  å¦å¤–JavaScriptå·²ç»ä¸ä»…ä»…æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨ç«¯ï¼Œè¿˜èƒ½è¿è¡Œåœ¨æœåŠ¡å™¨ç«¯ï¼Œå’Œå®¢æˆ·ç«¯ä¸­ã€‚äº†è§£å®¿ä¸»å¯¹JavaScriptçš„å®ç°ç‰ˆæœ¬ä¹Ÿå˜å¾—é‡è¦ã€‚

  ES5 å¼•ç”¨äº†ä¸€ç§ç‰ˆæœ¬æ§åˆ¶çš„è€ƒé‡ - ä¸¥æ ¼æ¨¡å¼(strict mode)ã€‚æ”¯æŒçš„jså¼•æ“å¯ä»¥è¯†åˆ«å‡º`'use strict'` è¿™ä¸ªç‰¹å®šçš„å­—ç¬¦ä¸²å­—é¢é‡ã€‚èƒ½å¤Ÿç¦ç”¨jsè¯­è¨€ä¸­çš„ä¸€äº›'ç³Ÿç²•',ä½¿å¾—ä»£ç åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹è¿è¡Œã€‚è€Œæ— æ³•è¯†åˆ«çš„å¼•æ“å¯ä»¥å¿½ç•¥ï¼Œä»ç„¶æŒ‰ç…§æ—¢æœ‰çš„è§„åˆ™æ‰§è¡Œã€‚å¦‚æœä¸€ä¸ªæ–‡ä»¶file1.js åœ¨ä¸¥æ ¼æ¨¡å¼è¡Œç¼–å†™ï¼Œè€Œfile2.jsåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ç¼–å†™ã€‚ä¸¤ä¸ªæ–‡ä»¶æ‹¼æ¥ä»¥åå¯èƒ½å‡ºç°é—®é¢˜ï¼š

  ```js
    // file1.js
    "use strict"
    function f(x) {}

    // file2.js
    function g() {
      var arguments = [] // error.ä¸¥æ ¼æ¨¡å¼ä¸‹ä¸å¯ä»¥ç»™argumentsèµ‹å€¼ã€‚
    }

  ```

  æ¯”è¾ƒå¥½çš„è§£å†³åŠæ³•æ˜¯ä½¿ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°(IIFE)åŒ…è£¹ä»£ç ï¼š
  ```js
  (function() {
    "use strict"
    function f() {}
  })();

  (function() {
    function g() {
      var arguments = [] // éä¸¥æ ¼æ¨¡å¼å¯ä»¥é‡æ–°èµ‹å€¼ï¼Œ ä½†ä¸åº”è¯¥å¦‚æ­¤
    }
  })();
  ```

  ä»£ç åº”è¯¥åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ç¼–å†™
  å¯ä»¥åº”è‡ªåŠ¨æ¨¡å—åŒ–æ–¹å¼ï¼Œä½¿ç”¨IIFEå°†ä»£ç åŒ…è£¹èµ·æ¥

#### ç¬¬äºŒæ¡ ç†è§£JavaScriptçš„æµ®ç‚¹æ•°

JavaScriptåªæœ‰ä¸€ç§æ•°å€¼ç±»å‹(åŒç²¾åº¦æµ®ç‚¹æ•°)
```js
  typeof 17; // "number"
  typeof 98.6; // "number"
  typeof -2.1; // "number"
```

ä½è¿ç®—æ¯”è¾ƒç‰¹æ®Šã€‚å°†åŒç²¾åº¦æµ®ç‚¹æ•°è½¬æ¢æˆ32ä½æ•´æ•°åè¿›è¡Œè¿ç®—ã€‚è®¡ç®—ç»“æœåœ¨è½¬æ¢æˆåŒç²¾åº¦æµ®ç‚¹æ•°ã€‚

è­¦æƒ•æµ®ç‚¹æ•°çš„è®¡ç®—ï¼Œå‡ºäº†åçš„ä¸ç²¾ç¡®:
```js
0.1 + 0.2; // 0.30000000000000004
```
æµ®ç‚¹æ•°è®¡ç®—ä¸å…·æœ‰äº¤æ¢å¾‹çš„è§„åˆ™
```js
  (0.1 + 0.2) + 0.3 // 0.6000000000000001
  0.1 + (0.2 + 0.3) // 0.6
```

åœ¨ç²¾åº¦èŒƒå›´å…è®¸çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æŠŠæµ®ç‚¹æ•° ä¹˜ä»¥ ä¸€ä¸ª 10çš„å€æ•° è¿›è¡Œæ•´æ•°è®¡ç®—ï¼Œ åœ¨è½¬æ¢æˆæµ®ç‚¹æ•°.

#### ç¬¬ä¸‰ç« ï¼š å½“å¿ƒéšå¼çš„å¼ºåˆ¶è½¬æ¢

JavaScriptå¯¹ç±»å‹é”™è¯¯æœ‰ä¸€å¥—å°½é‡ä¸æŠ›å‡ºé”™è¯¯çš„åšæ³•, è¿™ä¸å¾ˆå¤šè¯­è¨€ä¸åŒï¼Œè¿ç”¨èµ·æ¥è¦å¤šåŠ æ³¨æ„
```js
 3 + true; // 4
```

 - ç®—æ•°è¿ç®—ç¬¦ -, + , *, /, % åœ¨è®¡ç®—å‰å°†å‚æ•°è½¬æ¢æˆæ•°å­—ã€‚
 - è¿ç®—æ³•+ æ¯”è¾ƒå¾®å¦™: æ—¢é‡è½½äº†æ•°å­—ç›¸åŠ ï¼Œåˆé‡è½½äº†å­—ç¬¦ä¸²æ‹¼æ¥ã€‚
 ```js
  2 + 3; // 5
  "hello" + " world" // hello world

  2 + "3";  // 23
  "2" + 3; // 23

  1 + 2 + "3"; // 33
  1 + "2" + 3 // 123
 ```
 - ä½è¿ç®—æ³•å’Œç§»ä½è¿ç®—ç¬¦(~, &, ^, |, >>, <<, >>>) å°†å‚æ•°å¼ºåˆ¶è½¬æ¢æˆ32ä½æ•´æ•°
 NaNçš„é—®é¢˜ï¼šæµ‹è¯•ä¸€ä¸ªå€¼æ˜¯å¦ç­‰äºNaNï¼Œ`x === NaN` è¡Œä¸é€šï¼›`isNaN()`ä¸å¯é ï¼Œä»–å°†å‚æ•°å¼ºåˆ¶è½¬æ¢æˆæ•°å€¼ï¼šisNaN("foo")æ˜¯tureï¼Œè€Œä¸æ˜¯falseã€‚å¥½åŠæ³•å°±æ˜¯ å®ƒæ˜¯å”¯ä¸€ä¸€ä¸ªè‡ªå·±ä¸ç­‰äºè‡ªå·±çš„å€¼
 ```js
  function isReallyNaN(x) {
    return x !== x
  }

 ```
 å¯¹è±¡æ¯”è¾ƒå¸¸è§çš„ä¼šè¢«å¼ºåˆ¶è½¬æ¢æˆå­—ç¬¦ä¸²
 ```js
  "the math object: " + Math; // "the math object: [object Math]"
  "the JSON object: " + JSON; // "the JSON object: [object JSON]"
 ```
 å¯¹è±¡å¯ä»¥é‡å†™valueOfå’ŒtoStringä¸¤ä¸ªå‡½æ•°ï¼Œåœ¨å¼ºåˆ¶è½¬æ¢æˆæ•°å€¼å’Œå­—ç¬¦ä¸²ç±»å‹çš„æ—¶å€™ä½¿ç”¨
 ```js
  "J" + { toString: function() { return "S" }}; // JS
  2 * { valueOf: function() { return 3; }}; // 6
 ```

 å½“å¯¹è±¡åŒæ—¶é‡å†™äº†toStringå’ŒvalueOfå‡½æ•°ï¼Œåœ¨é¢å¯¹+è¿ç®—çš„æ—¶å€™ï¼Œä¼šå¦‚ä½•å¤„ç†å‘¢ï¼Ÿ
 ç­”æ¡ˆæ˜¯ ç›²ç›®åœ°é€‰ç”¨valueOfæ–¹æ³•è€Œä¸æ˜¯toStringæ–¹æ³•
 ```js
  var obj = {
    toString: function() {
      return "[object MyObject]"
    },
    valueOf: function() {
      return 17;
    }
  };
  "object: " + obj; // "object: 17"
 ```
 - if, ||, && ç­‰è¿ç®—ç¬¦é€»è¾‘ä¸Šéœ€è¦å¸ƒå°”å€¼ä½œä¸ºæ“ä½œå‚æ•°ï¼Œä½†å®é™…ä¸Šå¯ä»¥æ¥å—ä»»ä½•å€¼ã€‚å‚æ•°ä¼šè¢«å¼ºåˆ¶è½¬æ¢æˆçœŸå‡å€¼
 JavaScriptä¸­æœ‰7ä¸ªå‡å€¼: false, 0, -0, "", NaN. null, undefinedã€‚ å…¶ä»–å€¼éƒ½æ˜¯çœŸå€¼ã€‚
 ä½¿ç”¨çœŸå€¼è¿ç®—æ£€æŸ¥å‡½æ•°å‚æ•°æˆ–è€…å¯¹è±¡å±æ€§æ˜¯å¦å·²å®šä¹‰ä¸æ˜¯ç»å¯¹å®‰å…¨çš„ã€‚ä¾‹å¦‚ï¼š
 ```js
  function point(x, y) {
    if (!x) {
      x = 320
    }

    if (!y) {
      y = 240
    }
    return { x: x, y: y}
  }

  point(0, 0) // å¾—ä¸åˆ° {x: 0, y: 0 } è€Œæ˜¯ { x: 320, y: 240 }

  // éœ€è¦æ›´æ”¹ä¸º
    function point(x, y) {
    if (typeof x === 'undefined') {
      x = 320
    }

    if (y === undefined) {
      y = 240
    }
    return { x: x, y: y}
  }
 ```

 #### ç¬¬å››ç«  åŸå§‹ç±»å‹ä¼˜äºå°è£…å¯¹è±¡
 å¦‚é¢˜

 #### ç¬¬äº”ç«  é¿å…å¯¹æ··åˆç±»å‹ä½¿ç”¨ == è¿ç®—ç¬¦
 ```js
 "1.0e0" == { valueOf: function() { return true; } }; // true
 ```
 | å‚æ•°1   |        å‚æ•°2 | å¼ºåˆ¶è½¬æ¢ |
| -----:   | ----:       |  -----: |
|  null | undefined |  ä¸è½¬æ¢ï¼Œæ€»æ˜¯è¿”å›true |
|  null æˆ– undefined | é nullå’Œ undefinedç±»å‹ |  ä¸è½¬æ¢ï¼Œæ€»æ˜¯è¿”å›false |
|  åŸå§‹ç±»å‹ï¼šstring, number, boolean | Date å¯¹è±¡ |  å°†åŸå§‹ç±»å‹è½¬æ¢æˆæ•°å­—ï¼›å°†Dateè½¬æ¢æˆåŸå§‹ç±»å‹(å…ˆä½¿ç”¨toString(), ç„¶åä½¿ç”¨valueOf()) |
|  åŸå§‹ç±»å‹ï¼šstring, number, boolean | é Dateå¯¹è±¡ |  å°†åŸå§‹ç±»å‹è½¬æ¢æˆæ•°å­—ï¼›å°†éDateè½¬æ¢æˆåŸå§‹ç±»å‹(valueIf(), toString()) |
|  åŸå§‹ç±»å‹ï¼šstring, number, boolean | åŸå§‹ç±»å‹ï¼šstring, number, boolean |  å°†åŸå§‹ç±»å‹è½¬æ¢æˆæ•°å­—ï¼›|

**æ³¨æ„Dateå¯¹è±¡å’Œ éDateå¯¹è±¡çš„å¼ºåˆ¶è½¬æ¢è¿‡ç¨‹ valueOfå’ŒtoStringè°ƒç”¨é¡ºåºä¸åŒ**

#### ç¬¬å…­ç«  äº†è§£åˆ†å·æ’å…¥çš„å±€é™æ€§

JavaScriptæä¾›äº†è‡ªåŠ¨åˆ†å·æ’å…¥æŠ€æœ¯ï¼Œå®ƒèƒ½æ¨æ–­å‡ºæŸäº›ä¸Šä¸‹æ–‡ä¸­çœç•¥çš„åˆ†å·ï¼Œç„¶åæœ‰æ•ˆçš„è‡ªåŠ¨å°†åˆ†å·æ’å…¥åˆ°ç¨‹åºä¸­ã€‚
- è§„åˆ™-ï¼šåˆ†å·å°½åœ¨ | æ ‡è®°ä¹‹å‰ï¼Œä¸€ä¸ªæˆ–å¤šä¸ªæ¢è¡Œä¹‹åå’Œç¨‹åºè¾“å…¥çš„ç»“å°¾è¢«æ’å…¥
- è§„åˆ™äºŒï¼šåˆ†å·ä»…åœ¨éšåçš„è¾“å…¥æ ‡è®°ä¸èƒ½è§£ææ—¶æ’å…¥
```js
a = b
(f())

// ===
a = b(f())

a = b
["r", "g", "b"].forEach(function(key) {
  background[key] = foreground[key] / 2
})

// ===
a = b['b'].forEach(function(key) {
  background[key] = foreground[key] / 2
})

a = b
/Error/i.test(str) && fail()

// ===
a = b /Error / i.test(str) && fail()
```
ç«‹å³æ‰§è¡Œå‡½æ•° éœ€è¦æ³¨æ„æ‹¼æ¥æ—¶å€™çš„é”™è¯¯ã€‚åŠæ³•æ˜¯ï¼š åœ¨å‰é¢æ·»åŠ ';'
```js
// file1.js
;(function() {})()

// file2.js
;(function() {})()
```

return è¯­å¥éœ€è¦æŠŠè¿”å›å€¼å†™åœ¨åŒä¸€è¡Œï¼Œä¸ç„¶å³ä½¿æ·»åŠ ; ä¹Ÿä¸è¡Œ
ç±»ä¼¼çš„æœ‰ throw, break, continue ++, -- å‚æ•°ä¹‹å‰ä¸èƒ½æ¢è¡Œ
```js
  return 
  {};

  // ç›¸å½“äº
  return undefined;
  {};

````
- è§„åˆ™ä¸‰ï¼š åˆ†å·ä¸ä¼šä½œä¸ºåˆ†éš”ç¬¦åœ¨forå¾ªç¯ç©ºè¯­å¥çš„å¤´éƒ¨è¢«è‡ªåŠ¨æ’å…¥

```js
for (var i = 0, total = 1 // é”™è¯¯ï¼Œä¸ä¼šè‡ªåŠ¨æ·»åŠ åˆ†å·
i < n
i++){
  total += 1
}
```

#### ç¬¬ä¸ƒæ¡ï¼šè§†å­—ç¬¦ä¸²ä¸º16ä½çš„ä»£ç å•å…ƒåºåˆ—

JavaScriptä½¿ç”¨16ä½ç¼–ç , åœ¨unicode æ‰©å¤§è®¿é—®åˆ°20ä½ã€‚å­—ç¬¦ä¸²å±æ€§å’Œæ–¹æ³•(å¦‚length, charAt, charCodeAt)æ˜¯åŸºäºä»£ç å•å…ƒå±‚çº§ï¼Œè€Œä¸æ˜¯ä»£ç ç‚¹å±‚çº§ã€‚
```js
 "ğ„ clef".length; // 7
 "G clef".length; // 6

 "ğ„ clef".charCodeAt(0); // 55348 (0xd834)
 "ğ„ clef".charCodeAt(1); // 56606 (0xdd1e)
 "ğ„ clef".charAt(1) === " "; // false
 "ğ„ clef".charAt(2) === ' '; // true

 /^.$/.test("ğ„") // false
 /^..$/.test("ğ„") // true
```
**ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„åº“è¡¨å†™å¯è¯†åˆ«ä»£ç ç‚¹çš„å­—ç¬¦ä¸²æ“ä½œ**